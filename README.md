# environment-bench

Benchmarks for dictionaries keyed by a small number (<= 20) of consecutive
integers where 0 maps to the most recently added element, as typically used in
De Bruijn-indexed environments in compilers.

* `extension/n`: Create an environment by extending it n times
* `lookup/n`: Lookup up all variables [0..n - 1] in an environment of size n
* `combined/n`: Create an environment of size n and lookup all variables

## TL;DR:

Use lists at these sizes.

## Full results:

```
combined/1/Data.List                     mean 5.257 ns  ( +- 29.70 ps  )
combined/1/Data.Vector                   mean 5.520 ns  ( +- 302.0 ps  )
combined/1/Data.Map                      mean 4.525 ns  ( +- 37.17 ps  )
combined/1/Data.IntMap                   mean 4.526 ns  ( +- 48.56 ps  )
combined/1/Data.HashMap.Lazy             mean 4.507 ns  ( +- 17.58 ps  )
combined/1/Data.Sequence                 mean 5.958 ns  ( +- 129.1 ps  )
combined/3/Data.List                     mean 25.47 ns  ( +- 415.2 ps  )
combined/3/Data.Vector                   mean 57.94 ns  ( +- 942.2 ps  )
combined/3/Data.Map                      mean 79.08 ns  ( +- 476.2 ps  )
combined/3/Data.IntMap                   mean 46.93 ns  ( +- 623.6 ps  )
combined/3/Data.HashMap.Lazy             mean 97.88 ns  ( +- 834.1 ps  )
combined/3/Data.Sequence                 mean 34.68 ns  ( +- 374.6 ps  )
combined/5/Data.List                     mean 44.42 ns  ( +- 1.329 ns  )
combined/5/Data.Vector                   mean 91.75 ns  ( +- 527.2 ps  )
combined/5/Data.Map                      mean 173.4 ns  ( +- 1.801 ns  )
combined/5/Data.IntMap                   mean 89.60 ns  ( +- 1.819 ns  )
combined/5/Data.HashMap.Lazy             mean 195.7 ns  ( +- 1.125 ns  )
combined/5/Data.Sequence                 mean 74.82 ns  ( +- 1.540 ns  )
combined/7/Data.List                     mean 67.32 ns  ( +- 935.7 ps  )
combined/7/Data.Vector                   mean 127.8 ns  ( +- 316.9 ps  )
combined/7/Data.Map                      mean 292.8 ns  ( +- 641.9 ps  )
combined/7/Data.IntMap                   mean 142.6 ns  ( +- 1.361 ns  )
combined/7/Data.HashMap.Lazy             mean 307.1 ns  ( +- 4.104 ns  )
combined/7/Data.Sequence                 mean 162.0 ns  ( +- 702.0 ps  )
combined/10/Data.List                    mean 133.2 ns  ( +- 2.489 ns  )
combined/10/Data.Vector                  mean 195.6 ns  ( +- 861.9 ps  )
combined/10/Data.Map                     mean 502.9 ns  ( +- 2.485 ns  )
combined/10/Data.IntMap                  mean 240.1 ns  ( +- 2.040 ns  )
combined/10/Data.HashMap.Lazy            mean 461.6 ns  ( +- 6.042 ns  )
combined/10/Data.Sequence                mean 259.2 ns  ( +- 1.868 ns  )
combined/15/Data.List                    mean 301.1 ns  ( +- 3.665 ns  )
combined/15/Data.Vector                  mean 361.8 ns  ( +- 5.517 ns  )
combined/15/Data.Map                     mean 819.7 ns  ( +- 2.607 ns  )
combined/15/Data.IntMap                  mean 367.4 ns  ( +- 6.616 ns  )
combined/15/Data.HashMap.Lazy            mean 739.1 ns  ( +- 3.999 ns  )
combined/15/Data.Sequence                mean 607.8 ns  ( +- 4.793 ns  )
combined/20/Data.List                    mean 533.7 ns  ( +- 22.53 ns  )
combined/20/Data.Vector                  mean 509.0 ns  ( +- 1.338 ns  )
combined/20/Data.Map                     mean 1.219 μs  ( +- 1.759 ns  )
combined/20/Data.IntMap                  mean 557.7 ns  ( +- 2.666 ns  )
combined/20/Data.HashMap.Lazy            mean 1.039 μs  ( +- 11.70 ns  )
combined/20/Data.Sequence                mean 866.1 ns  ( +- 6.156 ns  )
extension/1/Data.List                    mean 5.371 ns  ( +- 274.9 ps  )
extension/1/Data.Vector                  mean 16.03 ns  ( +- 117.1 ps  )
extension/1/Data.Map                     mean 8.803 ns  ( +- 356.2 ps  )
extension/1/Data.IntMap                  mean 6.416 ns  ( +- 19.99 ps  )
extension/1/Data.HashMap.Lazy            mean 7.253 ns  ( +- 1.395 ns  )
extension/1/Data.Sequence                mean 3.955 ns  ( +- 305.3 ps  )
extension/3/Data.List                    mean 7.325 ns  ( +- 380.0 ps  )
extension/3/Data.Vector                  mean 44.83 ns  ( +- 461.8 ps  )
extension/3/Data.Map                     mean 61.20 ns  ( +- 180.4 ps  )
extension/3/Data.IntMap                  mean 19.80 ns  ( +- 154.9 ps  )
extension/3/Data.HashMap.Lazy            mean 26.49 ns  ( +- 124.3 ps  )
extension/3/Data.Sequence                mean 6.425 ns  ( +- 302.6 ps  )
extension/5/Data.List                    mean 8.812 ns  ( +- 62.88 ps  )
extension/5/Data.Vector                  mean 76.59 ns  ( +- 752.8 ps  )
extension/5/Data.Map                     mean 136.1 ns  ( +- 1.377 ns  )
extension/5/Data.IntMap                  mean 39.10 ns  ( +- 1.226 ns  )
extension/5/Data.HashMap.Lazy            mean 103.2 ns  ( +- 223.5 ps  )
extension/5/Data.Sequence                mean 15.45 ns  ( +- 1.130 ns  )
extension/7/Data.List                    mean 10.66 ns  ( +- 146.7 ps  )
extension/7/Data.Vector                  mean 111.5 ns  ( +- 2.046 ns  )
extension/7/Data.Map                     mean 222.2 ns  ( +- 1.652 ns  )
extension/7/Data.IntMap                  mean 59.52 ns  ( +- 1.249 ns  )
extension/7/Data.HashMap.Lazy            mean 181.1 ns  ( +- 373.4 ps  )
extension/7/Data.Sequence                mean 27.10 ns  ( +- 66.75 ps  )
extension/10/Data.List                   mean 14.00 ns  ( +- 1.145 ns  )
extension/10/Data.Vector                 mean 177.7 ns  ( +- 1.434 ns  )
extension/10/Data.Map                    mean 379.9 ns  ( +- 1.375 ns  )
extension/10/Data.IntMap                 mean 96.02 ns  ( +- 6.543 ns  )
extension/10/Data.HashMap.Lazy           mean 299.4 ns  ( +- 2.137 ns  )
extension/10/Data.Sequence               mean 56.33 ns  ( +- 7.141 ns  )
extension/15/Data.List                   mean 19.02 ns  ( +- 1.190 ns  )
extension/15/Data.Vector                 mean 307.6 ns  ( +- 1.728 ns  )
extension/15/Data.Map                    mean 654.0 ns  ( +- 8.890 ns  )
extension/15/Data.IntMap                 mean 168.7 ns  ( +- 1.182 ns  )
extension/15/Data.HashMap.Lazy           mean 522.7 ns  ( +- 6.715 ns  )
extension/15/Data.Sequence               mean 90.94 ns  ( +- 291.6 ps  )
extension/20/Data.List                   mean 23.75 ns  ( +- 181.8 ps  )
extension/20/Data.Vector                 mean 455.9 ns  ( +- 2.453 ns  )
extension/20/Data.Map                    mean 978.1 ns  ( +- 4.354 ns  )
extension/20/Data.IntMap                 mean 261.2 ns  ( +- 925.6 ps  )
extension/20/Data.HashMap.Lazy           mean 696.7 ns  ( +- 4.555 ns  )
extension/20/Data.Sequence               mean 124.1 ns  ( +- 1.137 ns  )
lookup/1/Data.List                       mean 4.625 ns  ( +- 59.61 ps  )
lookup/1/Data.Vector                     mean 4.523 ns  ( +- 95.51 ps  )
lookup/1/Data.Map                        mean 4.501 ns  ( +- 30.40 ps  )
lookup/1/Data.IntMap                     mean 4.922 ns  ( +- 30.03 ps  )
lookup/1/Data.HashMap.Lazy               mean 4.726 ns  ( +- 46.44 ps  )
lookup/1/Data.Sequence                   mean 4.222 ns  ( +- 47.59 ps  )
lookup/3/Data.List                       mean 14.13 ns  ( +- 187.5 ps  )
lookup/3/Data.Vector                     mean 8.690 ns  ( +- 31.52 ps  )
lookup/3/Data.Map                        mean 15.22 ns  ( +- 187.0 ps  )
lookup/3/Data.IntMap                     mean 20.44 ns  ( +- 501.8 ps  )
lookup/3/Data.HashMap.Lazy               mean 24.25 ns  ( +- 466.0 ps  )
lookup/3/Data.Sequence                   mean 21.77 ns  ( +- 761.0 ps  )
lookup/5/Data.List                       mean 27.42 ns  ( +- 238.4 ps  )
lookup/5/Data.Vector                     mean 10.88 ns  ( +- 47.80 ps  )
lookup/5/Data.Map                        mean 31.73 ns  ( +- 457.0 ps  )
lookup/5/Data.IntMap                     mean 36.64 ns  ( +- 1.653 ns  )
lookup/5/Data.HashMap.Lazy               mean 39.99 ns  ( +- 343.3 ps  )
lookup/5/Data.Sequence                   mean 43.21 ns  ( +- 316.2 ps  )
lookup/7/Data.List                       mean 42.70 ns  ( +- 253.3 ps  )
lookup/7/Data.Vector                     mean 13.81 ns  ( +- 45.08 ps  )
lookup/7/Data.Map                        mean 61.96 ns  ( +- 856.6 ps  )
lookup/7/Data.IntMap                     mean 53.90 ns  ( +- 3.117 ns  )
lookup/7/Data.HashMap.Lazy               mean 63.54 ns  ( +- 638.1 ps  )
lookup/7/Data.Sequence                   mean 72.68 ns  ( +- 388.7 ps  )
lookup/10/Data.List                      mean 99.33 ns  ( +- 1.898 ns  )
lookup/10/Data.Vector                    mean 18.51 ns  ( +- 67.36 ps  )
lookup/10/Data.Map                       mean 93.24 ns  ( +- 1.134 ns  )
lookup/10/Data.IntMap                    mean 84.88 ns  ( +- 4.132 ns  )
lookup/10/Data.HashMap.Lazy              mean 88.09 ns  ( +- 465.4 ps  )
lookup/10/Data.Sequence                  mean 125.3 ns  ( +- 794.6 ps  )
lookup/15/Data.List                      mean 243.7 ns  ( +- 4.100 ns  )
lookup/15/Data.Vector                    mean 40.77 ns  ( +- 197.0 ps  )
lookup/15/Data.Map                       mean 147.8 ns  ( +- 1.236 ns  )
lookup/15/Data.IntMap                    mean 145.8 ns  ( +- 11.76 ns  )
lookup/15/Data.HashMap.Lazy              mean 128.9 ns  ( +- 602.3 ps  )
lookup/15/Data.Sequence                  mean 347.7 ns  ( +- 3.170 ns  )
lookup/20/Data.List                      mean 454.6 ns  ( +- 642.0 ps  )
lookup/20/Data.Vector                    mean 49.77 ns  ( +- 33.88 ps  )
lookup/20/Data.Map                       mean 206.6 ns  ( +- 1.031 ns  )
lookup/20/Data.IntMap                    mean 205.2 ns  ( +- 14.14 ns  )
lookup/20/Data.HashMap.Lazy              mean 185.0 ns  ( +- 3.076 ns  )
lookup/20/Data.Sequence                  mean 587.1 ns  ( +- 8.860 ns  )
```
